import{d as e,r as a,c as s,a as l,o as t,b as i,e as o,f as n,n as c,j as r,i as d,t as v,w as u,v as h,_ as p}from"./main-BuE8beIh.js";const g={class:"image-base64-converter"},m={class:"converter-header"},y={class:"mode-selector"},w={class:"converter-content"},b={key:0,class:"to-base64-section"},k={class:"main-workspace"},x={class:"left-panel"},f={class:"upload-section"},B={class:"section-header"},C={class:"header-actions"},G=["disabled"],M={key:0,class:"upload-placeholder"},P={key:1,class:"image-preview"},U=["src","alt"],R={class:"image-info"},L={class:"info-item"},j={class:"value"},_={class:"info-item"},I={class:"value"},$={class:"info-item"},E={class:"value"},F={class:"right-panel"},V={key:0,class:"result-section"},W={class:"base64-output"},O=["value"],z={class:"result-stats"},D={class:"stat-item"},H={class:"stat-item"},J={class:"stat-item"},T={key:1,class:"result-placeholder"},K={key:1,class:"from-base64-section"},N={class:"main-workspace"},A={class:"left-panel"},S={class:"input-section"},Z={class:"section-header"},q={class:"header-actions"},Q=["disabled"],X={class:"base64-input-area"},Y={class:"right-panel"},ee={key:0,class:"decoded-result-section"},ae={class:"decoded-image-container"},se=["src"],le={class:"decoded-info"},te={class:"info-item"},ie={class:"value"},oe={class:"info-item"},ne={class:"value"},ce={key:1,class:"error-section"},re={class:"error-message"},de={key:2,class:"result-placeholder"},ve=p(e({__name:"ImageBase64Converter",emits:["back"],setup(e){const p=a("toBase64"),ve=a(),ue=a(null),he=a(""),pe=a(""),ge=a(""),me=a(""),ye=a(""),we=a(""),be=a(""),ke=a("success"),xe=s(()=>{if(!ue.value||!pe.value)return 0;const e=ue.value.size,a=.75*pe.value.length;return Math.round((a-e)/e*100)}),fe=e=>{p.value=e,Ve()},Be=()=>{ve.value?.click()},Ce=e=>{const a=e.target,s=a.files?.[0];s&&Me(s)},Ge=e=>{const a=e.dataTransfer?.files;if(a&&a.length>0){const e=a[0];e&&e.type.startsWith("image/")?Me(e):We("请选择图片文件","error")}},Me=e=>{ue.value=e;const a=new FileReader;a.onload=e=>{he.value=e.target?.result,pe.value=e.target?.result},a.readAsDataURL(e)},Pe=()=>{ue.value=null,he.value="",pe.value="",ve.value&&(ve.value.value="")},Ue=async()=>{try{await navigator.clipboard.writeText(pe.value),We("Base64编码已复制到剪贴板","success")}catch(e){We("复制失败","error")}},Re=()=>{const e=new Blob([pe.value],{type:"text/plain"}),a=URL.createObjectURL(e),s=document.createElement("a");s.href=a,s.download=`${ue.value?.name||"image"}_base64.txt`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a),We("Base64文件已下载","success")},Le=async()=>{try{const e=await navigator.clipboard.readText();ge.value=e,_e(),We("Base64编码已粘贴","success")}catch(e){We("粘贴失败","error")}},je=()=>{ge.value="",me.value="",ye.value="",we.value=""},_e=()=>{if(!ge.value.trim())return me.value="",ye.value="",void(we.value="");try{let e=ge.value.trim();if(e.startsWith("data:image/")){const a=e.match(/^data:image\/([^;]+);base64,(.+)$/);if(!(a&&a[1]&&a[2]))throw new Error("无效的data URL格式");ye.value=a[1].toUpperCase(),e=a[2]}else ye.value=Ie(e);if(!/^[A-Za-z0-9+/]*={0,2}$/.test(e))throw new Error("无效的Base64编码格式");const a=$e(ye.value);me.value=`data:${a};base64,${e}`,we.value="",We("Base64解码成功","success")}catch(e){me.value="",we.value="解码失败: "+e.message}},Ie=e=>{const a={"/9j/":"JPEG",iVBORw0KGgo:"PNG",R0lGODlh:"GIF",UklGR:"WebP"};for(const[s,l]of Object.entries(a))if(e.startsWith(s))return l;return"Unknown"},$e=e=>({JPEG:"image/jpeg",JPG:"image/jpeg",PNG:"image/png",GIF:"image/gif",WebP:"image/webp",BMP:"image/bmp",SVG:"image/svg+xml"}[e.toUpperCase()]||"image/png"),Ee=()=>{if(!me.value)return;const e=document.createElement("a");e.href=me.value,e.download=`decoded_image.${ye.value?.toLowerCase()||"png"}`,document.body.appendChild(e),e.click(),document.body.removeChild(e),We("图片已下载","success")},Fe=e=>{if(0===e)return"0 B";const a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["B","KB","MB","GB"][a]},Ve=()=>{Pe(),je()},We=(e,a="success")=>{be.value=e,ke.value=a,setTimeout(()=>{be.value=""},3e3)};return(e,a)=>(t(),l("div",g,[i("div",m,[i("button",{class:"back-btn",onClick:a[0]||(a[0]=a=>e.$emit("back"))},[...a[5]||(a[5]=[i("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[i("path",{d:"m15 18-6-6 6-6"})],-1),n(" 返回 ",-1)])]),a[6]||(a[6]=i("h2",{class:"converter-title"},"图片 ⇄ Base64 互转",-1)),i("div",y,[i("button",{class:c(["mode-btn",{active:"toBase64"===p.value}]),onClick:a[1]||(a[1]=e=>fe("toBase64"))}," 图片转Base64 ",2),i("button",{class:c(["mode-btn",{active:"fromBase64"===p.value}]),onClick:a[2]||(a[2]=e=>fe("fromBase64"))}," Base64转图片 ",2)])]),i("div",w,["toBase64"===p.value?(t(),l("div",b,[i("div",k,[i("div",x,[i("div",f,[i("div",B,[a[8]||(a[8]=i("h3",null,"选择图片",-1)),i("div",C,[i("button",{class:"action-btn-small",onClick:Pe,title:"清空",disabled:!ue.value},[...a[7]||(a[7]=[i("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[i("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,G)])]),i("div",{class:"upload-area",onClick:Be,onDragover:a[3]||(a[3]=r(()=>{},["prevent"])),onDrop:r(Ge,["prevent"])},[i("input",{ref_key:"fileInput",ref:ve,type:"file",accept:"image/*",onChange:Ce,style:{display:"none"}},null,544),ue.value?(t(),l("div",P,[i("img",{src:he.value,alt:ue.value.name},null,8,U),i("div",R,[i("div",L,[a[10]||(a[10]=i("span",{class:"label"},"文件名:",-1)),i("span",j,v(ue.value.name),1)]),i("div",_,[a[11]||(a[11]=i("span",{class:"label"},"大小:",-1)),i("span",I,v(Fe(ue.value.size)),1)]),i("div",$,[a[12]||(a[12]=i("span",{class:"label"},"类型:",-1)),i("span",E,v(ue.value.type),1)])])])):(t(),l("div",M,[...a[9]||(a[9]=[d('<svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-d55aa745><rect x="3" y="3" width="18" height="18" rx="2" ry="2" data-v-d55aa745></rect><circle cx="9" cy="9" r="2" data-v-d55aa745></circle><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21" data-v-d55aa745></path></svg><p data-v-d55aa745>点击选择图片或拖拽到此处</p><p class="upload-hint" data-v-d55aa745>支持 JPG、PNG、GIF、WebP 等格式</p>',3)])]))],32)])]),a[17]||(a[17]=i("div",{class:"divider"},null,-1)),i("div",F,[pe.value?(t(),l("div",V,[i("div",{class:"section-header"},[a[15]||(a[15]=i("h3",null,"Base64 编码结果",-1)),i("div",{class:"header-actions"},[i("button",{class:"action-btn-small",onClick:Ue,title:"复制"},[...a[13]||(a[13]=[i("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[i("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),i("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})],-1)])]),i("button",{class:"action-btn-small",onClick:Re,title:"下载为文本文件"},[...a[14]||(a[14]=[i("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[i("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),i("polyline",{points:"7,10 12,15 17,10"}),i("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)])])])]),i("div",W,[i("textarea",{value:pe.value,readonly:"",class:"base64-textarea",placeholder:"Base64编码结果将显示在这里..."},null,8,O)]),i("div",z,[i("span",D,v(pe.value.length)+" 字符",1),i("span",H,v(Math.round(pe.value.length/1024))+" KB",1),i("span",J,"压缩率: "+v(xe.value)+"%",1)])])):(t(),l("div",T,[...a[16]||(a[16]=[d('<svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-d55aa745><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-d55aa745></path><polyline points="14,2 14,8 20,8" data-v-d55aa745></polyline><line x1="16" y1="13" x2="8" y2="13" data-v-d55aa745></line><line x1="16" y1="17" x2="8" y2="17" data-v-d55aa745></line><polyline points="10,9 9,9 8,9" data-v-d55aa745></polyline></svg><p data-v-d55aa745>选择图片后，Base64编码结果将显示在这里</p>',2)])]))])])])):o("",!0),"fromBase64"===p.value?(t(),l("div",K,[i("div",N,[i("div",A,[i("div",S,[i("div",Z,[a[20]||(a[20]=i("h3",null,"Base64 编码输入",-1)),i("div",q,[i("button",{class:"action-btn-small",onClick:Le,title:"粘贴"},[...a[18]||(a[18]=[i("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[i("rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}),i("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"})],-1)])]),i("button",{class:"action-btn-small",onClick:je,title:"清空",disabled:!ge.value},[...a[19]||(a[19]=[i("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[i("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,Q)])]),i("div",X,[u(i("textarea",{"onUpdate:modelValue":a[4]||(a[4]=e=>ge.value=e),class:"base64-input",placeholder:"请粘贴Base64编码字符串...\n支持带data:image前缀的完整格式，也支持纯Base64编码",onInput:_e},null,544),[[h,ge.value]])])])]),a[27]||(a[27]=i("div",{class:"divider"},null,-1)),i("div",Y,[me.value?(t(),l("div",ee,[i("div",{class:"section-header"},[a[22]||(a[22]=i("h3",null,"解码结果",-1)),i("div",{class:"header-actions"},[i("button",{class:"action-btn-small",onClick:Ee,title:"下载图片"},[...a[21]||(a[21]=[i("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[i("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),i("polyline",{points:"7,10 12,15 17,10"}),i("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)])])])]),i("div",ae,[i("img",{src:me.value,alt:"解码后的图片",class:"decoded-image"},null,8,se),i("div",le,[i("div",te,[a[23]||(a[23]=i("span",{class:"label"},"图片类型:",-1)),i("span",ie,v(ye.value||"未知"),1)]),i("div",oe,[a[24]||(a[24]=i("span",{class:"label"},"数据大小:",-1)),i("span",ne,v(Fe(.75*ge.value.length)),1)])])])])):we.value?(t(),l("div",ce,[i("div",re,[a[25]||(a[25]=i("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[i("circle",{cx:"12",cy:"12",r:"10"}),i("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),i("line",{x1:"9",y1:"9",x2:"15",y2:"15"})],-1)),n(" "+v(we.value),1)])])):(t(),l("div",de,[...a[26]||(a[26]=[i("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[i("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),i("circle",{cx:"9",cy:"9",r:"2"}),i("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})],-1),i("p",null,"输入Base64编码后，解码图片将显示在这里",-1)])]))])])])):o("",!0)]),be.value?(t(),l("div",{key:0,class:c(["message",ke.value])},v(be.value),3)):o("",!0)]))}}),[["__scopeId","data-v-d55aa745"]]);export{ve as default};
