import{d as e,r as t,c as s,a,o as n,b as o,e as r,f as l,n as i,w as c,v as u,t as v,i as d,_ as m}from"./main-BuE8beIh.js";import{H as p,j as h}from"./json-CND9QiEn.js";import"./_commonjsHelpers-CXUWDbkB.js";const g={class:"postman-json-converter"},f={class:"converter-header"},b={class:"converter-actions"},y={class:"mode-toggle"},k={key:0,class:"converter-content"},C={class:"input-section"},w={class:"section-header"},S={class:"section-actions"},j={class:"button-group"},O={key:0,class:"error-message"},N={class:"output-section"},J={class:"section-header"},$={class:"section-actions"},P={key:0,class:"result-info"},x={class:"stat-item"},U={class:"stat-item"},_={class:"output-container"},R={key:0,class:"code-output"},B={key:1,class:"output-placeholder"},L={key:1,class:"converter-content"},M={class:"input-section"},I={class:"section-header"},T={class:"section-actions"},A={class:"button-group"},H={key:0,class:"error-message"},E={class:"output-section"},z={class:"section-header"},G={class:"section-actions"},V={key:0,class:"result-info"},D={class:"stat-item"},F={class:"stat-item"},q={class:"button-group"},K={class:"output-container"},Q=["innerHTML"],W={key:1,class:"output-placeholder"},X=m(e({__name:"JsonPostmanConverter",emits:["back"],setup(e){p.registerLanguage("json",h);const m=t("json-to-postman"),X=t(""),Y=t(""),Z=t(""),ee=t(""),te=t(""),se=t(""),ae=t("pretty"),ne=t(""),oe=t("success"),re=t(void 0),le=s(()=>{if(!Y.value)return null;return{lines:Y.value.split("\n").filter(e=>e.trim()).length,params:Y.value.split("\n").filter(e=>e.includes("=")).length}}),ie=s(()=>{if(!te.value)return null;return{lines:te.value.split("\n").length,size:te.value.length}}),ce=s(()=>{if(!te.value)return"";try{return p.highlight(te.value,{language:"json"}).value}catch{return te.value}}),ue=e=>{m.value=e,Je()},ve=(e,t)=>{ne.value=e,oe.value=t,setTimeout(()=>{ne.value=""},3e3)},de=()=>{Z.value="",X.value.trim()?(clearTimeout(re.value),re.value=setTimeout(()=>{me(!1)},500)):Y.value=""},me=(e=!0)=>{if(Z.value="",X.value.trim())try{const t=JSON.parse(X.value);Y.value=pe(t),e&&ve("JSON转Postman参数成功","success")}catch(t){Z.value=`JSON格式错误: ${t.message}`,Y.value="",e&&ve("JSON格式错误","error")}else e&&ve("请先输入JSON数据","error")},pe=e=>{const t=(e,s="")=>{const a=[];for(const[n,o]of Object.entries(e)){const e=s?`${s}[${n}]`:n;null==o?a.push(`${e}=`):"object"!=typeof o||Array.isArray(o)?Array.isArray(o)?o.forEach((s,n)=>{"object"==typeof s?a.push(...t(s,`${e}[${n}]`)):a.push(`${e}[${n}]=${encodeURIComponent(String(s))}`)}):a.push(`${e}=${encodeURIComponent(String(o))}`):a.push(...t(o,e))}return a};if(Array.isArray(e)){const s=[];return e.forEach((e,a)=>{"object"==typeof e?s.push(...t(e,`[${a}]`)):s.push(`[${a}]=${encodeURIComponent(String(e))}`)}),s.join("\n")}return"object"==typeof e?t(e).join("\n"):`value=${encodeURIComponent(String(e))}`},he=()=>{se.value="",ee.value.trim()?(clearTimeout(re.value),re.value=setTimeout(()=>{ge(!1)},500)):te.value=""},ge=(e=!0)=>{if(se.value="",ee.value.trim())try{const t=fe(ee.value);"pretty"===ae.value?te.value=JSON.stringify(t,null,2):te.value=JSON.stringify(t),e&&ve("Postman参数转JSON成功","success")}catch(t){se.value=`转换失败: ${t.message}`,te.value="",e&&ve("转换失败","error")}else e&&ve("请先输入Postman参数","error")},fe=e=>{const t=e.trim().split("\n"),s={};return t.forEach(e=>{const t=e.trim();if(!t||!t.includes("="))return;const[a,...n]=t.split("=");if(!a)return;const o=n.join("="),r=decodeURIComponent(o||""),l=a.split(/[\[\]]+/).filter(e=>e&&""!==e);if(0===l.length)return;let i=s;for(let s=0;s<l.length-1;s++){const e=l[s],t=l[s+1];e&&t&&(i[e]||(i[e]=/^\d+$/.test(t)?[]:{}),i=i[e])}const c=l[l.length-1];if(!c)return;let u=r;if("true"===r?u=!0:"false"===r?u=!1:"null"===r||""===r?u=null:/^\d+$/.test(r)?u=parseInt(r):/^\d+\.\d+$/.test(r)&&(u=parseFloat(r)),Array.isArray(i)){i[parseInt(c)]=u}else i[c]=u}),s},be=()=>{if(ee.value.trim())try{fe(ee.value),se.value="",ve("Postman参数格式正确 ✅","success")}catch(e){se.value=`参数格式错误: ${e.message}`,ve("参数格式错误 ❌","error")}else ve("请先输入Postman参数","error")},ye=()=>{if(X.value.trim())try{const e=JSON.parse(X.value);X.value=JSON.stringify(e,null,2),me(!1),ve("JSON格式化成功！","success")}catch(e){ve("JSON格式错误，无法格式化","error")}},ke=()=>{ae.value="pretty"===ae.value?"compact":"pretty",ge(!1)},Ce=async()=>{if(Y.value)try{await navigator.clipboard.writeText(Y.value),ve("Postman参数已复制到剪贴板","success")}catch(e){ve("复制失败","error")}else ve("没有可复制的内容","error")},we=async()=>{if(te.value)try{await navigator.clipboard.writeText(te.value),ve("JSON数据已复制到剪贴板","success")}catch(e){ve("复制失败","error")}else ve("没有可复制的内容","error")},Se=()=>{if(!Y.value)return void ve("没有可下载的内容","error");const e=new Blob([Y.value],{type:"text/plain"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="postman-params.txt",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t),ve("Postman参数文件已下载","success")},je=()=>{if(!te.value)return void ve("没有可下载的内容","error");const e=new Blob([te.value],{type:"application/json"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="converted-data.json",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t),ve("JSON文件已下载","success")},Oe=e=>{const t={1:{name:"用户登录数据",data:{username:"admin",password:"123456",remember:!0,user_info:{name:"管理员",email:"admin@example.com",roles:["admin","user"]},settings:{theme:"dark",language:"zh-CN",notifications:{email:!0,sms:!1}}}},2:{name:"商品数据",data:{product_id:12345,name:"MacBook Pro",price:12999.99,in_stock:!0,categories:["电脑","苹果","笔记本"],specifications:{cpu:"M3 Pro",memory:"16GB",storage:"512GB SSD"},reviews:[{user:"张三",rating:5,comment:"很好用"},{user:"李四",rating:4,comment:"性价比不错"}]}}}[e];t&&(X.value=JSON.stringify(t.data,null,2),me(!1),ve(`已加载${t.name}示例`,"success"))},Ne=e=>{const t={1:{name:"用户登录参数",data:"username=admin\npassword=123456\nremember=true\nuser_info[name]=管理员\nuser_info[email]=admin@example.com\nuser_info[roles][0]=admin\nuser_info[roles][1]=user\nsettings[theme]=dark\nsettings[language]=zh-CN\nsettings[notifications][email]=true\nsettings[notifications][sms]=false"},2:{name:"商品参数",data:"product_id=12345\nname=MacBook Pro\nprice=12999.99\nin_stock=true\ncategories[0]=电脑\ncategories[1]=苹果\ncategories[2]=笔记本\nspecifications[cpu]=M3 Pro\nspecifications[memory]=16GB\nspecifications[storage]=512GB SSD\nreviews[0][user]=张三\nreviews[0][rating]=5\nreviews[0][comment]=很好用\nreviews[1][user]=李四\nreviews[1][rating]=4\nreviews[1][comment]=性价比不错"}}[e];t&&(ee.value=t.data,ge(!1),ve(`已加载${t.name}示例`,"success"))},Je=()=>{X.value="",Y.value="",ee.value="",te.value="",Z.value="",se.value=""};return(e,t)=>(n(),a("div",g,[o("div",f,[o("button",{class:"back-btn",onClick:t[0]||(t[0]=t=>e.$emit("back"))},[...t[9]||(t[9]=[o("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[o("path",{d:"m15 18-6-6 6-6"})],-1),l(" 返回 ",-1)])]),t[11]||(t[11]=o("h2",{class:"converter-title"},"Postman ⇄ JSON 互转",-1)),o("div",b,[o("div",y,[o("button",{class:i(["mode-btn",{active:"json-to-postman"===m.value}]),onClick:t[1]||(t[1]=e=>ue("json-to-postman"))}," JSON → Postman ",2),o("button",{class:i(["mode-btn",{active:"postman-to-json"===m.value}]),onClick:t[2]||(t[2]=e=>ue("postman-to-json"))}," Postman → JSON ",2)]),o("button",{class:"action-btn",onClick:Je,title:"清空"},[...t[10]||(t[10]=[o("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[o("path",{d:"M3 6h18"}),o("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),o("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})],-1)])])])]),"json-to-postman"===m.value?(n(),a("div",k,[o("div",C,[o("div",w,[t[12]||(t[12]=o("h3",null,"JSON数据输入",-1)),o("div",S,[o("div",j,[o("button",{onClick:t[3]||(t[3]=e=>Oe(1)),class:"btn-group-item"},"用户数据"),o("button",{onClick:t[4]||(t[4]=e=>Oe(2)),class:"btn-group-item"},"商品数据"),o("button",{onClick:ye,class:"btn-group-item"},"格式化")])])]),c(o("textarea",{"onUpdate:modelValue":t[5]||(t[5]=e=>X.value=e),class:"code-textarea",placeholder:"请输入JSON数据...",onInput:de},null,544),[[u,X.value]]),Z.value?(n(),a("div",O,v(Z.value),1)):r("",!0)]),o("div",N,[o("div",J,[t[13]||(t[13]=o("h3",null,"Postman参数输出",-1)),o("div",$,[le.value?(n(),a("div",P,[o("span",x,v(le.value.lines)+" 行",1),o("span",U,v(le.value.params)+" 参数",1)])):r("",!0),o("div",{class:"button-group"},[o("button",{onClick:Ce,class:"btn-group-item"},"复制"),o("button",{onClick:Se,class:"btn-group-item"},"下载")])])]),o("div",_,[Y.value?(n(),a("pre",R,v(Y.value),1)):(n(),a("div",B,[...t[14]||(t[14]=[d('<svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" data-v-e4c8d5c6><path d="M8 3L4 7l4 4" data-v-e4c8d5c6></path><path d="M4 7h16" data-v-e4c8d5c6></path><path d="m16 21 4-4-4-4" data-v-e4c8d5c6></path><path d="M20 17H4" data-v-e4c8d5c6></path></svg><p data-v-e4c8d5c6>Postman参数将显示在这里</p>',2)])]))])])])):(n(),a("div",L,[o("div",M,[o("div",I,[t[15]||(t[15]=o("h3",null,"Postman参数输入",-1)),o("div",T,[o("div",A,[o("button",{onClick:t[6]||(t[6]=e=>Ne(1)),class:"btn-group-item"},"用户参数"),o("button",{onClick:t[7]||(t[7]=e=>Ne(2)),class:"btn-group-item"},"商品参数"),o("button",{onClick:be,class:"btn-group-item"},"验证")])])]),c(o("textarea",{"onUpdate:modelValue":t[8]||(t[8]=e=>ee.value=e),class:"code-textarea",placeholder:"请输入Postman参数格式...",onInput:he},null,544),[[u,ee.value]]),se.value?(n(),a("div",H,v(se.value),1)):r("",!0)]),o("div",E,[o("div",z,[t[16]||(t[16]=o("h3",null,"JSON输出",-1)),o("div",G,[ie.value?(n(),a("div",V,[o("span",D,v(ie.value.lines)+" 行",1),o("span",F,v(ie.value.size)+" 字符",1)])):r("",!0),o("div",q,[o("button",{onClick:we,class:"btn-group-item"},"复制"),o("button",{onClick:je,class:"btn-group-item"},"下载"),o("button",{onClick:ke,class:"btn-group-item"},v("pretty"===ae.value?"压缩":"格式化"),1)])])]),o("div",K,[te.value?(n(),a("pre",{key:0,class:"code-output",innerHTML:ce.value},null,8,Q)):(n(),a("div",W,[...t[17]||(t[17]=[o("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1"},[o("polyline",{points:"16,18 22,12 16,6"}),o("polyline",{points:"8,6 2,12 8,18"})],-1),o("p",null,"JSON数据将显示在这里",-1)])]))])])])),ne.value?(n(),a("div",{key:2,class:i(["message-toast",oe.value])},v(ne.value),3)):r("",!0)]))}}),[["__scopeId","data-v-e4c8d5c6"]]);export{X as default};
