import{d as e,r as t,c as a,k as r,a as n,o as l,b as s,e as o,f as c,n as i,w as u,v as p,t as v,_ as d}from"./main-BuE8beIh.js";import{H as b,j as h}from"./json-CND9QiEn.js";import"./_commonjsHelpers-CXUWDbkB.js";function g(e){const t=e.regex,a=/(?![A-Za-z0-9])(?![$])/,r=t.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,a),n=t.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,a),l=t.concat(/[A-Z]+/,a),s={scope:"variable",match:"\\$+"+r},o={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},c=e.inherit(e.APOS_STRING_MODE,{illegal:null}),i="[ \t\n]",u={scope:"string",variants:[e.inherit(e.QUOTE_STRING_MODE,{illegal:null,contains:e.QUOTE_STRING_MODE.contains.concat(o)}),c,{begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:e.QUOTE_STRING_MODE.contains.concat(o),"on:begin":(e,t)=>{t.data._beginMatch=e[1]||e[2]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}},e.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/})]},p={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},v=["false","null","true"],d=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],b=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],h={keyword:d,literal:(e=>{const t=[];return e.forEach(e=>{t.push(e),e.toLowerCase()===e?t.push(e.toUpperCase()):t.push(e.toLowerCase())}),t})(v),built_in:b},g=e=>e.map(e=>e.replace(/\|\d+$/,"")),m={variants:[{match:[/new/,t.concat(i,"+"),t.concat("(?!",g(b).join("\\b|"),"\\b)"),n],scope:{1:"keyword",4:"title.class"}}]},y=t.concat(r,"\\b(?!\\()"),_={variants:[{match:[t.concat(/::/,t.lookahead(/(?!class\b)/)),y],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[n,t.concat(/::/,t.lookahead(/(?!class\b)/)),y],scope:{1:"title.class",3:"variable.constant"}},{match:[n,t.concat("::",t.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[n,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},f={scope:"attr",match:t.concat(r,t.lookahead(":"),t.lookahead(/(?!::)/))},E={relevance:0,begin:/\(/,end:/\)/,keywords:h,contains:[f,s,_,e.C_BLOCK_COMMENT_MODE,u,p,m]},O={relevance:0,match:[/\b/,t.concat("(?!fn\\b|function\\b|",g(d).join("\\b|"),"|",g(b).join("\\b|"),"\\b)"),r,t.concat(i,"*"),t.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[E]};E.contains.push(O);const k=[f,_,e.C_BLOCK_COMMENT_MODE,u,p,m],S={begin:t.concat(/#\[\s*\\?/,t.either(n,l)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:v,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:v,keyword:["new","array"]},contains:["self",...k]},...k,{scope:"meta",variants:[{match:n},{match:l}]}]};return{case_insensitive:!1,keywords:h,contains:[S,e.HASH_COMMENT_MODE,e.COMMENT("//","$"),e.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:e.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},{scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},{scope:"variable.language",match:/\$this\b/},s,O,_,{match:[/const/,/\s/,r],scope:{1:"keyword",3:"variable.constant"}},m,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},e.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:h,contains:["self",S,s,_,e.C_BLOCK_COMMENT_MODE,u,p]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[e.inherit(e.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},e.UNDERSCORE_TITLE_MODE]},u,p]}}const m={class:"php-json-converter"},y={class:"tool-header"},_={class:"header-left"},f={class:"mode-toggle"},E={key:0,class:"converter-layout"},O={class:"input-section"},k={key:0,class:"error-message"},S={class:"output-section"},w={class:"section-header"},C={class:"section-actions"},I={key:0,class:"result-info"},P={class:"stat-item"},x={class:"stat-item"},N={class:"button-group"},M={class:"output-container"},T=["innerHTML"],R={key:1,class:"output-placeholder"},H={key:1,class:"converter-layout"},$={class:"input-section"},j={class:"section-header"},L={class:"section-actions"},A={class:"button-group"},J={key:0,class:"error-message"},D={class:"output-section"},U={class:"section-header"},F={class:"section-actions"},B={key:0,class:"result-info"},z={class:"stat-item"},K={class:"stat-item"},Z={class:"button-group"},G={class:"output-container"},Q=["innerHTML"],V={key:1,class:"output-placeholder"},q=d(e({__name:"JsonToPhp",emits:["back"],setup(e){b.registerLanguage("php",g),b.registerLanguage("json",h);const d=t("json-to-php"),q=t(""),W=t(""),X=t(""),Y=t("short"),ee=t(""),te=t(""),ae=t(""),re=t("pretty"),ne=t(""),le=t("success"),se=a(()=>{if(!W.value)return null;return{lines:W.value.split("\n").length,size:W.value.length}}),oe=a(()=>{if(!te.value)return null;return{lines:te.value.split("\n").length,size:te.value.length}}),ce=a(()=>{if(!W.value)return"";try{return b.highlight(W.value,{language:"php"}).value}catch{return W.value}}),ie=a(()=>{if(!te.value)return"";try{return b.highlight(te.value,{language:"json"}).value}catch{return te.value}}),ue=e=>{d.value=e,xe()},pe=(e,t="success")=>{ne.value=e,le.value=t,setTimeout(()=>{ne.value=""},3e3)},ve=()=>{if(X.value="",q.value.trim())try{const e=JSON.parse(q.value);W.value=be(e,0),pe("转换成功！","success")}catch(e){X.value=`JSON格式错误: ${e.message}`,W.value="// JSON格式错误，请检查输入",pe("JSON格式错误，请检查输入","error")}else W.value=""},de=()=>{if(q.value.trim())try{JSON.parse(q.value),X.value="",pe("JSON格式正确 ✅","success")}catch(e){X.value=`JSON格式错误: ${e.message}`,pe("JSON格式错误 ❌","error")}else pe("请先输入JSON数据","error")},be=(e,t=0)=>{const a="    ".repeat(t),r="    ".repeat(t+1);if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("number"==typeof e)return e.toString();if("string"==typeof e)return`'${e.replace(/'/g,"\\'")}'`;if(Array.isArray(e)){if(0===e.length)return"short"===Y.value?"[]":"array()";const n=e.map(e=>`${r}${be(e,t+1)}`).join(",\n");return"short"===Y.value?`[\n${n}\n${a}]`:`array(\n${n}\n${a})`}if("object"==typeof e){const n=Object.keys(e);if(0===n.length)return"short"===Y.value?"[]":"array()";const l=n.map(a=>{const n=be(e[a],t+1);return`${r}'${a}' => ${n}`}).join(",\n");return"short"===Y.value?`[\n${l}\n${a}]`:`array(\n${l}\n${a})`}return"null"},he=()=>{ae.value="",ee.value.trim()?(clearTimeout(ge.value),ge.value=setTimeout(()=>{me(!1)},500)):te.value=""},ge=t(void 0),me=(e=!0)=>{if(ae.value="",ee.value.trim())try{const t=_e(ee.value);"pretty"===re.value?te.value=JSON.stringify(t,null,2):te.value=JSON.stringify(t),e&&pe("转换成功！","success")}catch(t){ae.value=`PHP数组解析错误: ${t.message}`,te.value="",e&&pe("PHP数组解析错误","error")}else e&&pe("请先输入PHP数组代码","error")},ye=()=>{if(ee.value.trim())try{_e(ee.value),ae.value="",pe("PHP数组格式正确 ✅","success")}catch(e){ae.value=`PHP数组格式错误: ${e.message}`,pe("PHP数组格式错误 ❌","error")}else pe("请先输入PHP数组代码","error")},_e=e=>{let t=e.trim();if(t=t.replace(/^<\?php\s*/i,""),t=t.replace(/^\$\w+\s*=\s*/,""),t=t.replace(/;?\s*$/,""),!t)throw new Error("输入为空");try{let e=t;return e=e.replace(/array\s*\(/g,"["),e=e.replace(/\)/g,"]"),e=e.replace(/\s*=>\s*/g,":"),e=e.replace(/'/g,'"'),e=e.replace(/\btrue\b/g,"true"),e=e.replace(/\bfalse\b/g,"false"),e=e.replace(/\bnull\b/g,"null"),JSON.parse(e)}catch(a){try{let e=t.replace(/\/\*[\s\S]*?\*\//g,"");e=e.replace(/\/\/.*$/gm,"");const a={},r=e.split("\n");for(const t of r){const e=t.trim();if(e&&e.includes("=>")){const t=e.split("=>",2),r=t[0],n=t[1];if(!r||!n)continue;const l=r.trim().replace(/['"]/g,"").replace(/,$/,"");let s=n.trim().replace(/,$/,"");"true"===s?a[l]=!0:"false"===s?a[l]=!1:"null"===s?a[l]=null:/^\d+$/.test(s)?a[l]=parseInt(s):/^\d+\.\d+$/.test(s)?a[l]=parseFloat(s):a[l]=s.replace(/['"]/g,"")}}return Object.keys(a).length>0?a:{error:"无法解析PHP数组"}}catch(r){throw new Error("无法解析PHP数组格式，请检查语法")}}},fe=()=>{q.value=JSON.stringify({name:"张三",age:30,email:"zhangsan@example.com",skills:["PHP","JavaScript","MySQL"],address:{city:"北京",district:"朝阳区",zipcode:"100000"},active:!0,salary:null},null,2),ve()},Ee=()=>{ee.value="[\n    'name' => '张三',\n    'age' => 30,\n    'email' => 'zhangsan@example.com',\n    'skills' => ['PHP', 'JavaScript', 'MySQL'],\n    'address' => [\n        'city' => '北京',\n        'district' => '朝阳区',\n        'zipcode' => '100000'\n    ],\n    'active' => true,\n    'salary' => null\n]",me(!1)},Oe=()=>{if(q.value.trim())try{const e=JSON.parse(q.value);q.value=JSON.stringify(e,null,2),ve(),pe("JSON格式化成功！","success")}catch(e){pe("JSON格式错误，无法格式化","error")}},ke=()=>{Y.value="short"===Y.value?"long":"short",ve()},Se=()=>{re.value="pretty"===re.value?"compact":"pretty",me(!1)},we=async()=>{if(W.value)try{await navigator.clipboard.writeText(W.value),pe("PHP代码已复制到剪贴板！","success")}catch(e){pe("复制失败，请手动复制","error")}else pe("没有可复制的内容","error")},Ce=async()=>{if(te.value)try{await navigator.clipboard.writeText(te.value),pe("JSON数据已复制到剪贴板！","success")}catch(e){pe("复制失败，请手动复制","error")}else pe("没有可复制的内容","error")},Ie=()=>{if(!W.value)return void pe("没有可下载的内容","error");const e=new Blob([`<?php\n\n$data = ${W.value};\n`],{type:"text/plain;charset=utf-8"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="converted_array.php",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t),pe("PHP文件下载成功！","success")},Pe=()=>{if(!te.value)return void pe("没有可下载的内容","error");const e=new Blob([te.value],{type:"application/json;charset=utf-8"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="converted_data.json",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t),pe("JSON文件下载成功！","success")},xe=()=>{q.value="",W.value="",ee.value="",te.value="",X.value="",ae.value=""};return r(()=>{fe()}),(e,t)=>(l(),n("div",m,[s("div",y,[s("div",_,[s("button",{onClick:t[0]||(t[0]=t=>e.$emit("back")),class:"back-button"},[...t[6]||(t[6]=[s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"m15 18-6-6 6-6"})],-1),c(" 返回 ",-1)])]),t[7]||(t[7]=s("div",{class:"title-section"},[s("h2",null,"PHP ⇄ JSON 互转"),s("p",null,"PHP数组与JSON数据格式互相转换")],-1))]),s("div",f,[s("button",{class:i(["mode-btn",{active:"json-to-php"===d.value}]),onClick:t[1]||(t[1]=e=>ue("json-to-php"))}," JSON → PHP ",2),s("button",{class:i(["mode-btn",{active:"php-to-json"===d.value}]),onClick:t[2]||(t[2]=e=>ue("php-to-json"))}," PHP → JSON ",2)])]),"json-to-php"===d.value?(l(),n("div",E,[s("div",O,[s("div",{class:"section-header"},[t[8]||(t[8]=s("h3",null,"JSON输入",-1)),s("div",{class:"section-actions"},[s("div",{class:"button-group"},[s("button",{onClick:fe,class:"btn-group-item"},"示例数据"),s("button",{onClick:Oe,class:"btn-group-item"},"格式化"),s("button",{onClick:de,class:"btn-group-item"},"验证")])])]),u(s("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>q.value=e),class:"code-textarea",placeholder:"请输入JSON数据...",onInput:ve},null,544),[[p,q.value]]),X.value?(l(),n("div",k,v(X.value),1)):o("",!0)]),s("div",S,[s("div",w,[t[9]||(t[9]=s("h3",null,"PHP数组输出",-1)),s("div",C,[se.value?(l(),n("div",I,[s("span",P,v(se.value.lines)+" 行",1),s("span",x,v(se.value.size)+" 字符",1)])):o("",!0),s("div",N,[s("button",{onClick:we,class:"btn-group-item"},"复制"),s("button",{onClick:Ie,class:"btn-group-item"},"下载"),s("button",{onClick:ke,class:"btn-group-item"},v("short"===Y.value?"长语法":"短语法"),1)])])]),s("div",M,[W.value?(l(),n("pre",{key:0,class:"code-output",innerHTML:ce.value},null,8,T)):(l(),n("div",R,[...t[10]||(t[10]=[s("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1"},[s("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),s("polyline",{points:"14,2 14,8 20,8"})],-1),s("p",null,"PHP数组代码将显示在这里",-1)])]))])])])):(l(),n("div",H,[s("div",$,[s("div",j,[t[11]||(t[11]=s("h3",null,"PHP数组输入",-1)),s("div",L,[s("div",A,[s("button",{onClick:Ee,class:"btn-group-item"},"示例数据"),s("button",{onClick:ye,class:"btn-group-item"},"验证"),s("button",{onClick:t[4]||(t[4]=e=>me(!0)),class:"btn-group-item"},"转换")])])]),u(s("textarea",{"onUpdate:modelValue":t[5]||(t[5]=e=>ee.value=e),class:"code-textarea",placeholder:"请输入PHP数组代码...",onInput:he},null,544),[[p,ee.value]]),ae.value?(l(),n("div",J,v(ae.value),1)):o("",!0)]),s("div",D,[s("div",U,[t[12]||(t[12]=s("h3",null,"JSON输出",-1)),s("div",F,[oe.value?(l(),n("div",B,[s("span",z,v(oe.value.lines)+" 行",1),s("span",K,v(oe.value.size)+" 字符",1)])):o("",!0),s("div",Z,[s("button",{onClick:Ce,class:"btn-group-item"},"复制"),s("button",{onClick:Pe,class:"btn-group-item"},"下载"),s("button",{onClick:Se,class:"btn-group-item"},v("pretty"===re.value?"压缩":"格式化"),1)])])]),s("div",G,[te.value?(l(),n("pre",{key:0,class:"code-output",innerHTML:ie.value},null,8,Q)):(l(),n("div",V,[...t[13]||(t[13]=[s("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1"},[s("polyline",{points:"16,18 22,12 16,6"}),s("polyline",{points:"8,6 2,12 8,18"})],-1),s("p",null,"JSON数据将显示在这里",-1)])]))])])])),ne.value?(l(),n("div",{key:2,class:i(["message",le.value])},v(ne.value),3)):o("",!0)]))}}),[["__scopeId","data-v-b19c3a9f"]]);export{q as default};
