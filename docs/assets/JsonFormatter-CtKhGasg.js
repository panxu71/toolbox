import{d as e,r as t,c as a,a as s,o as l,b as o,e as r,f as n,w as c,v as i,t as u,n as v,_ as p}from"./main-DsoSj-vY.js";import{H as d,j as m}from"./json-CND9QiEn.js";import"./_commonjsHelpers-CXUWDbkB.js";const h={class:"json-formatter"},y={class:"formatter-header"},g={class:"formatter-actions"},f=["disabled"],b=["disabled"],O={class:"formatter-content"},S={class:"input-section"},J={class:"section-header"},N={class:"input-status"},k={key:0,class:"auto-format-indicator"},x={key:1,class:"format-hint"},j={class:"section-actions"},w={class:"button-group"},C={key:0,class:"error-message"},M={class:"output-section"},B={class:"section-header"},T={key:0,class:"result-info"},P={class:"stat-item"},H={class:"stat-item"},L={class:"stat-item"},$={key:0,class:"stat-item"},A={class:"json-output-container"},_=["innerHTML"],E={key:1,class:"output-placeholder"},U=p(e({__name:"JsonFormatter",emits:["back"],setup(e){d.registerLanguage("json",m);const p=t(""),U=t(""),z=t(""),D=t(""),I=t("success"),R=t(!1),V=a(()=>{if(!U.value)return null;const e=U.value.split("\n").length,t=U.value.length;let a=0,s=0,l="simple",o="简单";try{const e=JSON.parse(p.value);a=F(e),s=q(e),a>50||s>5?(l="complex",o="复杂"):(a>20||s>3)&&(l="medium",o="中等")}catch(r){a=0,s=0}return{lines:e,size:t,keys:a,depth:s,complexity:l,complexityText:o}}),G=a(()=>{if(!U.value)return"";return d.highlight(U.value,{language:"json"}).value}),F=e=>{if("object"!=typeof e||null===e)return 0;let t=0;return Array.isArray(e)?e.forEach(e=>{t+=F(e)}):(t+=Object.keys(e).length,Object.values(e).forEach(e=>{t+=F(e)})),t},q=(e,t=1)=>{if("object"!=typeof e||null===e)return t;let a=t;return Array.isArray(e)?e.forEach(e=>{const s=q(e,t+1);a=Math.max(a,s)}):Object.values(e).forEach(e=>{const s=q(e,t+1);a=Math.max(a,s)}),a},K=()=>{z.value="",p.value.trim()?(clearTimeout(W.value),W.value=setTimeout(()=>{X()},500)):U.value=""},Q=e=>{const t=e.clipboardData?.getData("text")||"";setTimeout(()=>{t.trim()&&(X(),ne("已粘贴内容并自动格式化","success"))},50)},W=t(void 0),X=()=>{if(p.value.trim()){R.value=!0;try{const e=JSON.parse(p.value);U.value=JSON.stringify(e,null,2),z.value=""}catch(e){U.value=""}finally{setTimeout(()=>{R.value=!1},300)}}},Y=()=>{if(p.value.trim())try{const e=JSON.parse(p.value);U.value=JSON.stringify(e,null,2),z.value="",ne("JSON格式化成功","success")}catch(e){z.value=`JSON格式错误: ${e.message}`,U.value="",ne("JSON格式错误","error")}else ne("请先输入JSON字符串","error")},Z=()=>{if(p.value.trim())try{JSON.parse(p.value),z.value="",ne("JSON格式正确 ✅","success")}catch(e){z.value=`JSON格式错误: ${e.message}`,ne("JSON格式错误 ❌","error")}else ne("请先输入JSON字符串","error")},ee=()=>{if(p.value.trim())try{const e=JSON.parse(p.value);U.value=JSON.stringify(e),z.value="",ne("JSON压缩成功","success")}catch(e){z.value=`JSON格式错误: ${e.message}`,U.value="",ne("JSON格式错误","error")}else ne("请先输入JSON字符串","error")},te=()=>{if(p.value.trim())try{JSON.parse(p.value);const e=JSON.stringify(p.value);U.value=e,z.value="",ne("JSON转义成功","success")}catch(e){const t=JSON.stringify(p.value);U.value=t,z.value="",ne("字符串转义成功","success")}else ne("请先输入JSON字符串","error")},ae=()=>{if(p.value.trim())try{const e=JSON.parse(p.value);if("string"==typeof e)try{const t=JSON.parse(e);U.value=JSON.stringify(t,null,2),z.value="",ne("JSON去转义并格式化成功","success")}catch{U.value=e,z.value="",ne("字符串去转义成功","success")}else U.value=JSON.stringify(e,null,2),z.value="",ne("JSON去转义成功","success")}catch(e){z.value=`去转义失败: ${e.message}`,U.value="",ne("去转义失败","error")}else ne("请先输入转义的JSON字符串","error")},se=()=>{p.value="",U.value="",z.value="",ne("已清空","success")},le=async()=>{if(U.value)try{await navigator.clipboard.writeText(U.value),ne("已复制到剪贴板","success")}catch(e){ne("复制失败","error")}},oe=()=>{if(U.value)try{const e=new Blob([U.value],{type:"application/json"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t;const s=(new Date).toISOString().slice(0,19).replace(/:/g,"-");a.download=`json-${s}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t),ne("JSON文件已下载","success")}catch(e){ne("下载失败","error")}},re=e=>{const t={1:{name:"用户信息",data:{id:1001,name:"张三",email:"zhangsan@example.com",age:28,isActive:!0,address:{street:"中山路123号",city:"北京",zipCode:"100000",country:"中国"},hobbies:["阅读","游泳","编程"],profile:{avatar:"https://example.com/avatar.jpg",bio:"热爱技术的软件工程师"}}},2:{name:"商品列表",data:{products:[{id:"P001",name:"MacBook Pro",category:"电脑",price:12999,inStock:!0,specifications:{processor:"M3 Pro",memory:"16GB",storage:"512GB SSD"}},{id:"P002",name:"iPhone 15 Pro",category:"手机",price:7999,inStock:!1,specifications:{processor:"A17 Pro",memory:"128GB"}}]}}}[e];t&&(p.value=JSON.stringify(t.data),U.value=JSON.stringify(t.data,null,2),z.value="",ne(`已加载${t.name}示例数据`,"success"))},ne=(e,t)=>{D.value=e,I.value=t,setTimeout(()=>{D.value=""},3e3)};return(e,t)=>(l(),s("div",h,[o("div",y,[o("button",{class:"back-btn",onClick:t[0]||(t[0]=t=>e.$emit("back"))},[...t[4]||(t[4]=[o("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[o("path",{d:"m15 18-6-6 6-6"})],-1),n(" 返回 ",-1)])]),t[8]||(t[8]=o("h2",{class:"formatter-title"},"JSON格式化",-1)),o("div",g,[o("button",{class:"action-btn",onClick:se,title:"清空"},[...t[5]||(t[5]=[o("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[o("path",{d:"M3 6h18"}),o("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),o("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})],-1)])]),o("button",{class:"action-btn",onClick:le,title:"复制JSON",disabled:!U.value},[...t[6]||(t[6]=[o("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[o("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),o("path",{d:"M4 16c-1.1 0-2-.9-2 2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})],-1)])],8,f),o("button",{class:"action-btn",onClick:oe,title:"下载JSON文件",disabled:!U.value},[...t[7]||(t[7]=[o("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[o("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),o("polyline",{points:"7,10 12,15 17,10"}),o("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)])],8,b)])]),o("div",O,[o("div",S,[o("div",J,[t[10]||(t[10]=o("h3",null,"JSON输入",-1)),o("div",N,[R.value?(l(),s("span",k,[...t[9]||(t[9]=[o("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[o("path",{d:"M21 12a9 9 0 11-6.219-8.56"})],-1),n(" 自动格式化中... ",-1)])])):p.value&&!z.value?(l(),s("span",x," 粘贴内容将自动格式化 ")):r("",!0)]),o("div",j,[o("div",w,[o("button",{class:"group-btn example-btn",onClick:t[1]||(t[1]=e=>re(1))},"示例1"),o("button",{class:"group-btn example-btn",onClick:t[2]||(t[2]=e=>re(2))},"示例2"),o("button",{class:"group-btn format-btn",onClick:Y},"格式化"),o("button",{class:"group-btn validate-btn",onClick:Z},"验证"),o("button",{class:"group-btn minify-btn",onClick:ee},"压缩"),o("button",{class:"group-btn escape-btn",onClick:te},"转义"),o("button",{class:"group-btn unescape-btn",onClick:ae},"去转义")])])]),c(o("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>p.value=e),class:"json-input",placeholder:"请输入或粘贴JSON字符串...\n\n支持功能：\n• 粘贴时自动格式化\n• 实时语法验证\n• 多种格式转换\n• 语法高亮显示",onInput:K,onPaste:Q},null,544),[[i,p.value]]),z.value?(l(),s("div",C,u(z.value),1)):r("",!0)]),o("div",M,[o("div",B,[t[11]||(t[11]=o("h3",null,"格式化结果",-1)),V.value?(l(),s("div",T,[o("span",P,u(V.value.lines)+" 行",1),o("span",H,u(V.value.size)+" 字符",1),o("span",L,u(V.value.keys)+" 个键",1),V.value.depth>1?(l(),s("span",$,"深度 "+u(V.value.depth),1)):r("",!0),o("span",{class:v(["stat-item",V.value.complexity])},u(V.value.complexityText),3)])):r("",!0)]),o("div",A,[U.value?(l(),s("pre",{key:0,class:"json-output",innerHTML:G.value},null,8,_)):(l(),s("div",E,[...t[12]||(t[12]=[o("p",null,"格式化后的JSON将显示在这里",-1)])]))])])]),D.value?(l(),s("div",{key:0,class:v(["message-toast",I.value])},u(D.value),3)):r("",!0)]))}}),[["__scopeId","data-v-ad57f457"]]);export{U as default};
