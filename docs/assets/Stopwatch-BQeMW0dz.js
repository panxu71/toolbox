import{u as e}from"./useWakeLock-BYHZhNJ-.js";import{d as t,r as a,c as l,k as s,l as n,a as o,o as i,b as c,e as u,f as v,t as r,i as d,F as h,h as p,n as m,_ as k}from"./main-DsoSj-vY.js";const w={class:"converter-header"},g={class:"header-actions"},b={class:"converter-content"},f={class:"stopwatch-container"},y={class:"main-stopwatch-area"},C={class:"time-display"},x={class:"time-content"},S={class:"main-time"},T={class:"milliseconds"},M={class:"control-buttons"},E={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},L={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},B={key:0,class:"laps-section"},F={class:"laps-container"},$={class:"laps-list"},D={class:"lap-number"},I={class:"lap-time"},_={class:"lap-total"},j={key:1,class:"stats-section"},R={class:"stats-grid"},H={class:"stat-item"},K={class:"stat-value"},V={class:"stat-item"},W={class:"stat-value"},q={class:"stat-item"},A={class:"stat-value"},O={class:"stat-item"},U={class:"stat-value"},J=k(t({__name:"Stopwatch",emits:["back"],setup(t){const k=a(!1),J=a(0),z=a(0),G=a(0),N=a(null),P=a(!1),{requestWakeLock:Q,releaseWakeLock:X}=e(),Y=a([]),Z=a(0),ee=a(""),te=a("success"),ae=l(()=>[...Y.value].reverse()),le=l(()=>0===Y.value.length?0:Math.min(...Y.value.map(e=>e.lapTime))),se=l(()=>0===Y.value.length?0:Math.max(...Y.value.map(e=>e.lapTime))),ne=l(()=>{if(0===Y.value.length)return 0;const e=Y.value.reduce((e,t)=>e+t.lapTime,0);return Math.round(e/Y.value.length)}),oe=e=>{const t=Math.floor(e/1e3),a=Math.floor(t/3600),l=Math.floor(t%3600/60),s=t%60;return`${a.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`},ie=e=>(e%1e3).toString().padStart(3,"0"),ce=()=>{k.value=!0,z.value=Date.now()-G.value,N.value=window.setInterval(()=>{J.value=Date.now()-z.value},10),ke("秒表已开始","success")},ue=()=>{k.value=!1,G.value=J.value,N.value&&(clearInterval(N.value),N.value=null),ke("秒表已暂停","success")},ve=()=>{ce(),ke("秒表已继续","success")},re=()=>{k.value=!1,J.value=0,z.value=0,G.value=0,N.value&&(clearInterval(N.value),N.value=null),ke("秒表已重置","success")},de=()=>{if(!k.value)return;const e=Y.value.length>0&&Y.value[Y.value.length-1]?.totalTime||0,t=J.value-e;Z.value++;const a={id:Z.value,lapTime:t,totalTime:J.value};Y.value.push(a),he(),ke(`第 ${Y.value.length} 次计次已记录`,"success")},he=()=>{if(Y.value.length<=1)return;const e=le.value,t=se.value;Y.value.forEach(a=>{a.isFastest=a.lapTime===e&&e!==t,a.isSlowest=a.lapTime===t&&e!==t})},pe=()=>{Y.value=[],Z.value=0,ke("计次记录已清空","success")},me=()=>{if(0===Y.value.length)return void ke("没有计次记录可导出","error");const e=[["次数","计次时间","总时间"],...Y.value.map((e,t)=>[(t+1).toString(),`${oe(e.lapTime)}.${ie(e.lapTime)}`,`${oe(e.totalTime)}.${ie(e.totalTime)}`])].map(e=>e.join(",")).join("\n"),t=new Blob(["\ufeff"+e],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");if(void 0!==a.download){const e=URL.createObjectURL(t);a.setAttribute("href",e),a.setAttribute("download",`秒表记录_${(new Date).toISOString().slice(0,10)}.csv`),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),ke("计次记录已导出","success")}},ke=(e,t="success")=>{ee.value=e,te.value=t,setTimeout(()=>{ee.value=""},3e3)},we=async()=>{try{document.fullscreenElement?(await document.exitFullscreen(),P.value=!1,X(ke),ke("已退出全屏模式","success")):(await document.documentElement.requestFullscreen(),P.value=!0,Q(ke),ke("已进入全屏模式，按F11或ESC键退出","success"))}catch(e){P.value=!P.value,P.value?(Q(ke),ke("已进入全屏模式（CSS模式），按ESC键退出","success")):(X(ke),ke("已退出全屏模式","success"))}},ge=()=>{const e=P.value;P.value=!!document.fullscreenElement,e&&!P.value&&X(ke)},be=e=>{"Space"===e.code?(e.preventDefault(),k.value?ue():0===J.value?ce():ve()):"KeyL"===e.code&&k.value?(e.preventDefault(),de()):"KeyR"!==e.code||k.value?"Escape"===e.code?(e.preventDefault(),document.fullscreenElement?document.exitFullscreen():P.value&&(P.value=!1,ke("已退出全屏模式","success"))):"KeyF"!==e.code&&"F11"!==e.code||(e.preventDefault(),we()):(e.preventDefault(),re())};return s(()=>{document.addEventListener("keydown",be),document.addEventListener("fullscreenchange",ge),ke("快捷键：空格键 开始/暂停，L键 计次，R键 重置，F键/F11键 全屏","success")}),n(()=>{document.removeEventListener("keydown",be),document.removeEventListener("fullscreenchange",ge),N.value&&clearInterval(N.value),X()}),(e,t)=>(i(),o("div",{class:m(["stopwatch",{fullscreen:P.value}])},[c("div",w,[c("button",{class:"back-btn",onClick:t[0]||(t[0]=t=>e.$emit("back"))},[...t[1]||(t[1]=[c("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[c("path",{d:"m15 18-6-6 6-6"})],-1),v(" 返回 ",-1)])]),t[4]||(t[4]=c("h2",{class:"converter-title"},"在线秒表",-1)),c("div",g,[Y.value.length>0?(i(),o("button",{key:0,class:"header-export-btn",onClick:me},[...t[2]||(t[2]=[c("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[c("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),c("polyline",{points:"7,10 12,15 17,10"}),c("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),v(" 导出记录 ",-1)])])):u("",!0),Y.value.length>0?(i(),o("button",{key:1,class:"header-clear-btn",onClick:pe},[...t[3]||(t[3]=[c("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[c("polyline",{points:"3,6 5,6 21,6"}),c("path",{d:"m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"})],-1),v(" 清空记录 ",-1)])])):u("",!0)])]),c("div",b,[c("div",f,[c("div",y,[c("div",C,[c("div",x,[c("div",S,r(oe(J.value)),1),c("div",T,"."+r(ie(J.value)),1)])]),c("div",M,[k.value||0!==J.value?u("",!0):(i(),o("button",{key:0,class:"start-btn",onClick:ce},[...t[5]||(t[5]=[c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[c("polygon",{points:"5 3 19 12 5 21 5 3"})],-1),v(" 开始 ",-1)])])),k.value?(i(),o("button",{key:1,class:"pause-btn",onClick:ue},[...t[6]||(t[6]=[c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[c("rect",{x:"6",y:"4",width:"4",height:"16"}),c("rect",{x:"14",y:"4",width:"4",height:"16"})],-1),v(" 暂停 ",-1)])])):u("",!0),!k.value&&J.value>0?(i(),o("button",{key:2,class:"resume-btn",onClick:ve},[...t[7]||(t[7]=[c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[c("polygon",{points:"5 3 19 12 5 21 5 3"})],-1),v(" 继续 ",-1)])])):u("",!0),k.value?(i(),o("button",{key:3,class:"lap-btn",onClick:de},[...t[8]||(t[8]=[c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[c("circle",{cx:"12",cy:"12",r:"10"}),c("polyline",{points:"12,6 12,12 16,14"})],-1),v(" 计次 ",-1)])])):u("",!0),J.value>0?(i(),o("button",{key:4,class:"reset-btn",onClick:re},[...t[9]||(t[9]=[d('<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-5b284279><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" data-v-5b284279></path><path d="M21 3v5h-5" data-v-5b284279></path><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" data-v-5b284279></path><path d="M3 21v-5h5" data-v-5b284279></path></svg> 重置 ',2)])])):u("",!0),c("button",{class:"fullscreen-btn",onClick:we},[P.value?(i(),o("svg",L,[...t[11]||(t[11]=[c("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"},null,-1)])])):(i(),o("svg",E,[...t[10]||(t[10]=[c("path",{d:"m15 3 6 6m-6-6v6m6-6h-6M9 21l-6-6m6 6v-6m-6 6h6"},null,-1)])])),v(" "+r(P.value?"退出全屏":"全屏"),1)])])]),Y.value.length>0?(i(),o("div",B,[t[13]||(t[13]=c("h3",{class:"section-title"},"计次记录",-1)),c("div",F,[t[12]||(t[12]=c("div",{class:"laps-header"},[c("span",{class:"lap-number"},"次数"),c("span",{class:"lap-time"},"计次时间"),c("span",{class:"lap-total"},"总时间")],-1)),c("div",$,[(i(!0),o(h,null,p(ae.value,(e,t)=>(i(),o("div",{key:e.id,class:m(["lap-item",{fastest:e.isFastest,slowest:e.isSlowest}])},[c("span",D,r(Y.value.length-t),1),c("span",I,r(oe(e.lapTime))+"."+r(ie(e.lapTime)),1),c("span",_,r(oe(e.totalTime))+"."+r(ie(e.totalTime)),1)],2))),128))])])])):u("",!0),Y.value.length>0?(i(),o("div",j,[t[18]||(t[18]=c("h3",{class:"section-title"},"统计信息",-1)),c("div",R,[c("div",H,[t[14]||(t[14]=c("div",{class:"stat-label"},"总计次数",-1)),c("div",K,r(Y.value.length),1)]),c("div",V,[t[15]||(t[15]=c("div",{class:"stat-label"},"最快计次",-1)),c("div",W,r(oe(le.value))+"."+r(ie(le.value)),1)]),c("div",q,[t[16]||(t[16]=c("div",{class:"stat-label"},"最慢计次",-1)),c("div",A,r(oe(se.value))+"."+r(ie(se.value)),1)]),c("div",O,[t[17]||(t[17]=c("div",{class:"stat-label"},"平均计次",-1)),c("div",U,r(oe(ne.value))+"."+r(ie(ne.value)),1)])])])):u("",!0)])]),ee.value?(i(),o("div",{key:0,class:m(["message-toast",te.value])},r(ee.value),3)):u("",!0)],2))}}),[["__scopeId","data-v-5b284279"]]);export{J as default};
