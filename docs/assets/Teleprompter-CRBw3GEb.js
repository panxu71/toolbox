import{d as e,r as t,c as l,u as a,k as n,z as o,l as s,a as u,o as v,e as i,b as c,f as r,i as d,w as p,v as h,t as b,m as f,n as g,_ as m}from"./main-BuE8beIh.js";import{u as k}from"./useWakeLock-BTGS7b9Y.js";const w={key:0,class:"converter-header"},M={class:"converter-actions"},y=["title"],x={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},C={key:1,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},L=["title"],D=["title"],E={class:"converter-content"},B={key:0,class:"control-panel"},H={class:"control-group"},S={class:"speed-value"},U={class:"control-group"},V={class:"font-value"},T={class:"control-group"},F={class:"control-group"},I={class:"control-group"},z={class:"font-value"},P={key:1,class:"text-input-area"},$={class:"input-actions"},A={key:0,class:"focus-overlay-local"},_=["innerHTML"],R={key:1,class:"fullscreen-controls"},j=["title"],K={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},q={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},W=["title"],Z=["title"],N={class:"speed-control"},J={class:"speed-control"},O={class:"speed-control"},Y=m(e({__name:"Teleprompter",emits:["back"],setup(e){const m=t(!1),Y=t(!1),G=t(!1),Q=t(!1),X=t(3),ee=t(32),te=t("#ffffff"),le=t("#000000"),ae=t(0),ne=t(1),{requestWakeLock:oe,releaseWakeLock:se}=k(),ue=t(""),ve=t(),ie=t(),ce=t(null),re=t(""),de=t("success"),pe=l(()=>ue.value?ue.value.split("\n").map(e=>e.trim()).filter(e=>e.length>0).map(e=>`<p>${e}</p>`).join(""):"<p>请输入文本内容</p>"),he=l(()=>1.8*ee.value*ne.value),be=t(0),fe=l(()=>{const e=be.value||ve.value?.clientHeight||0;if(0===e)return 0;const t=(e-he.value)/2,l=t+he.value/2,a=.8*ee.value,n=l-a;return console.log("位置计算:",{linesInFocus:ne.value,fontSize:ee.value,viewportHeight:e,focusZoneHeight:he.value,focusZoneTop:t,focusZoneCenter:l,adjustment:a,finalPosition:n,scrollPosition:ae.value}),n}),ge=()=>{ce.value&&(clearInterval(ce.value),ce.value=null)},me=()=>{Y.value=!Y.value,Y.value?(ce.value||(ce.value=window.setInterval(()=>{if(ae.value-=X.value,ve.value){const e=(ve.value.clientHeight-he.value)/2,t=ve.value.scrollHeight;fe.value+ae.value+t<e&&(ge(),se(He),He("滚动完成","success"))}},100)),oe(He),He("开始滚动","success")):(ge(),se(He),He("暂停滚动","success"))},ke=()=>{ge(),Y.value=!1,ae.value=0,He("重置位置","success")},we=()=>{G.value=!G.value,He((G.value?"开启":"关闭")+"水平镜像","success")},Me=()=>{Q.value=!Q.value,He((Q.value?"开启":"关闭")+"垂直反转","success")},ye=async()=>{try{m.value?(document.fullscreenElement&&await document.exitFullscreen(),m.value=!1,He("已退出全屏模式","success")):(await document.documentElement.requestFullscreen(),m.value=!0,He("进入全屏模式，按ESC退出","success"))}catch(e){m.value=!m.value,m.value?He("进入全屏模式，双击退出","success"):He("已退出全屏模式","success")}},xe=()=>{ue.value="",ke(),He("文本已清空","success")},Ce=()=>{ue.value="欢迎使用在线提词器！\n\n这是一个专业的提词器工具，适用于：\n• 演讲和发言\n• 视频录制\n• 直播主持\n• 新闻播报\n\n主要功能：\n• 可调节滚动速度\n• 支持全屏显示\n• 镜像显示功能\n• 自定义字体大小和颜色\n• 支持文本文件导入\n\n使用方法：\n1. 输入或导入您的文本内容\n2. 调整字体大小和颜色\n3. 点击播放按钮开始滚动\n4. 双击进入全屏模式\n\n祝您使用愉快！",ke(),He("示例文本已加载","success")},Le=e=>{const t=e.target.files?.[0];if(!t)return;if("text/plain"!==t.type)return void He("请选择文本文件(.txt)","error");const l=new FileReader;l.onload=e=>{ue.value=e.target?.result,ke(),He("文件导入成功","success")},l.onerror=()=>{He("文件读取失败","error")},l.readAsText(t,"UTF-8")},De=e=>{"Space"===e.code?(e.preventDefault(),me()):"Escape"===e.code?(e.preventDefault(),document.fullscreenElement?document.exitFullscreen():m.value&&(m.value=!1)):"KeyR"===e.code?(e.preventDefault(),ke()):"KeyF"===e.code||"F11"===e.code?(e.preventDefault(),ye()):"ArrowUp"===e.code?(e.preventDefault(),X.value=Math.min(10,X.value+1)):"ArrowDown"===e.code?(e.preventDefault(),X.value=Math.max(1,X.value-1)):"ArrowRight"===e.code?(e.preventDefault(),ee.value=Math.min(80,ee.value+2),He(`字体大小: ${ee.value}px`,"success")):"ArrowLeft"===e.code?(e.preventDefault(),ee.value=Math.max(24,ee.value-2),He(`字体大小: ${ee.value}px`,"success")):"Equal"===e.code||"NumpadAdd"===e.code?(e.preventDefault(),ne.value=Math.min(5,ne.value+1),He(`聚焦行数: ${ne.value}行`,"success")):"Minus"===e.code||"NumpadSubtract"===e.code?(e.preventDefault(),ne.value=Math.max(1,ne.value-1),He(`聚焦行数: ${ne.value}行`,"success")):"KeyH"===e.code?(e.preventDefault(),we()):"KeyM"===e.code&&(e.preventDefault(),Me())},Ee=()=>{m.value=!!document.fullscreenElement,setTimeout(()=>{ae.value,ae.value=-999999,o(()=>{ae.value=0})},150)};a([ee,ne],()=>{console.log("参数变化，重置位置:",{fontSize:ee.value,linesInFocus:ne.value,oldScrollPosition:ae.value}),ae.value=0,console.log("重置后:",{newScrollPosition:ae.value})});const Be=()=>{setTimeout(()=>{ae.value=0},100)},He=(e,t="success")=>{re.value=e,de.value=t,setTimeout(()=>{re.value=""},3e3)};return n(()=>{document.addEventListener("keydown",De),document.addEventListener("fullscreenchange",Ee),window.addEventListener("resize",Be),o(()=>{if(ve.value){be.value=ve.value.clientHeight;const e=new ResizeObserver(e=>{for(let t of e){const e=t.contentRect.height;console.log("显示区域尺寸变化:",{width:t.contentRect.width,height:e,oldHeight:be.value,oldScrollPosition:ae.value,oldInitialPosition:fe.value}),be.value=e,ae.value=0,o(()=>{console.log("尺寸变化后重置:",{newScrollPosition:ae.value,newHeight:be.value,newInitialPosition:fe.value,finalTransform:fe.value+ae.value})})}});e.observe(ve.value),s(()=>{e.disconnect()})}}),He("提词器已就绪，空格播放，方向键调节","success")}),s(()=>{ge(),se(),document.removeEventListener("keydown",De),document.removeEventListener("fullscreenchange",Ee),window.removeEventListener("resize",Be)}),(e,t)=>(v(),u("div",{class:g(["teleprompter",{fullscreen:m.value}])},[m.value?i("",!0):(v(),u("div",w,[c("button",{class:"back-btn",onClick:t[0]||(t[0]=t=>e.$emit("back"))},[...t[11]||(t[11]=[c("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[c("path",{d:"m15 18-6-6 6-6"})],-1),r(" 返回 ",-1)])]),t[18]||(t[18]=c("h2",{class:"converter-title"},"在线提词器",-1)),c("div",M,[c("button",{onClick:me,class:"control-btn",title:Y.value?"暂停滚动":"开始播放（自动全屏）"},[Y.value?(v(),u("svg",C,[...t[13]||(t[13]=[c("rect",{x:"6",y:"4",width:"4",height:"16"},null,-1),c("rect",{x:"14",y:"4",width:"4",height:"16"},null,-1)])])):(v(),u("svg",x,[...t[12]||(t[12]=[c("polygon",{points:"5,3 19,12 5,21"},null,-1)])]))],8,y),c("button",{onClick:ke,class:"control-btn",title:"重置位置"},[...t[14]||(t[14]=[d('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-5b2bb829><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" data-v-5b2bb829></path><path d="M21 3v5h-5" data-v-5b2bb829></path><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" data-v-5b2bb829></path><path d="M3 21v-5h5" data-v-5b2bb829></path></svg>',1)])]),c("button",{onClick:we,class:"control-btn",title:G.value?"取消水平镜像":"水平镜像显示"},[...t[15]||(t[15]=[d('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-5b2bb829><path d="M2 12h20" data-v-5b2bb829></path><path d="M6 8v8" data-v-5b2bb829></path><path d="M18 8v8" data-v-5b2bb829></path><path d="M6 6l2 2" data-v-5b2bb829></path><path d="M6 18l2-2" data-v-5b2bb829></path><path d="M18 6l-2 2" data-v-5b2bb829></path><path d="M18 18l-2-2" data-v-5b2bb829></path></svg>',1)])],8,L),c("button",{onClick:Me,class:"control-btn",title:Q.value?"取消垂直反转":"垂直反转显示"},[...t[16]||(t[16]=[d('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-5b2bb829><path d="M12 2v20" data-v-5b2bb829></path><path d="M8 6h8" data-v-5b2bb829></path><path d="M8 18h8" data-v-5b2bb829></path><path d="M6 6l2 2" data-v-5b2bb829></path><path d="M18 6l-2 2" data-v-5b2bb829></path><path d="M6 18l2-2" data-v-5b2bb829></path><path d="M18 18l-2-2" data-v-5b2bb829></path></svg>',1)])],8,D),c("button",{onClick:ye,class:"control-btn",title:"全屏显示"},[...t[17]||(t[17]=[c("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[c("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})],-1)])])])])),c("div",E,[m.value?i("",!0):(v(),u("div",B,[c("div",H,[t[19]||(t[19]=c("label",null,"滚动速度",-1)),p(c("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=e=>X.value=e),min:"1",max:"10",step:"1",class:"speed-slider"},null,512),[[h,X.value]]),c("span",S,b(X.value),1)]),c("div",U,[t[20]||(t[20]=c("label",null,"字体大小",-1)),p(c("input",{type:"range","onUpdate:modelValue":t[2]||(t[2]=e=>ee.value=e),min:"16",max:"72",step:"2",class:"font-slider"},null,512),[[h,ee.value]]),c("span",V,b(ee.value)+"px",1)]),c("div",T,[t[21]||(t[21]=c("label",null,"文本颜色",-1)),p(c("input",{type:"color","onUpdate:modelValue":t[3]||(t[3]=e=>te.value=e),class:"color-picker"},null,512),[[h,te.value]])]),c("div",F,[t[22]||(t[22]=c("label",null,"背景颜色",-1)),p(c("input",{type:"color","onUpdate:modelValue":t[4]||(t[4]=e=>le.value=e),class:"color-picker"},null,512),[[h,le.value]])]),c("div",I,[t[23]||(t[23]=c("label",null,"聚焦行数",-1)),p(c("input",{type:"range","onUpdate:modelValue":t[5]||(t[5]=e=>ne.value=e),min:"1",max:"5",step:"1",class:"font-slider"},null,512),[[h,ne.value]]),c("span",z,b(ne.value)+"行",1)])])),m.value?i("",!0):(v(),u("div",P,[p(c("textarea",{"onUpdate:modelValue":t[6]||(t[6]=e=>ue.value=e),placeholder:"请输入您的演讲稿或台词内容...",class:"script-textarea",rows:"8"},null,512),[[h,ue.value]]),c("div",$,[c("button",{onClick:xe,class:"action-btn"},"清空"),c("button",{onClick:Ce,class:"action-btn"},"示例文本"),c("input",{type:"file",onChange:Le,accept:".txt",ref_key:"fileInput",ref:ie,style:{display:"none"}},null,544),c("button",{onClick:t[7]||(t[7]=t=>e.$refs.fileInput.click()),class:"action-btn"},"导入文件")])])),c("div",{class:g(["teleprompter-display",{mirrored:G.value,"vertical-flipped":Q.value}]),style:f({fontSize:ee.value+"px",color:te.value,backgroundColor:le.value}),ref_key:"displayArea",ref:ve,onDblclick:ye},[ue.value?(v(),u("div",A,[t[24]||(t[24]=c("div",{class:"overlay-top"},null,-1)),c("div",{class:"reading-zone",style:f({height:he.value+"px"})},null,4),t[25]||(t[25]=c("div",{class:"overlay-bottom"},null,-1))])):i("",!0),c("div",{class:g(["scrolling-text",{playing:Y.value}]),style:f({transform:`translateY(${fe.value+ae.value}px)`})},[c("div",{class:"text-content",innerHTML:pe.value},null,8,_),t[26]||(t[26]=c("div",{class:"text-end"},"— 结束 —",-1))],6)],38)]),m.value?(v(),u("div",R,[c("button",{onClick:me,class:"fs-control-btn",title:Y.value?"暂停":"播放"},[Y.value?(v(),u("svg",q,[...t[28]||(t[28]=[c("rect",{x:"6",y:"4",width:"4",height:"16"},null,-1),c("rect",{x:"14",y:"4",width:"4",height:"16"},null,-1)])])):(v(),u("svg",K,[...t[27]||(t[27]=[c("polygon",{points:"5,3 19,12 5,21"},null,-1)])]))],8,j),c("button",{onClick:ke,class:"fs-control-btn",title:"重置"},[...t[29]||(t[29]=[c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[c("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),c("path",{d:"M21 3v5h-5"})],-1)])]),c("button",{onClick:we,class:g(["fs-control-btn",{active:G.value}]),title:G.value?"关闭水平镜像":"开启水平镜像"},[...t[30]||(t[30]=[d('<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-5b2bb829><path d="M2 12h20" data-v-5b2bb829></path><path d="M6 8v8" data-v-5b2bb829></path><path d="M18 8v8" data-v-5b2bb829></path><path d="M6 6l2 2" data-v-5b2bb829></path><path d="M6 18l2-2" data-v-5b2bb829></path><path d="M18 6l-2 2" data-v-5b2bb829></path><path d="M18 18l-2-2" data-v-5b2bb829></path></svg>',1)])],10,W),c("button",{onClick:Me,class:g(["fs-control-btn",{active:Q.value}]),title:Q.value?"关闭垂直反转":"开启垂直反转"},[...t[31]||(t[31]=[d('<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-5b2bb829><path d="M12 2v20" data-v-5b2bb829></path><path d="M8 6h8" data-v-5b2bb829></path><path d="M8 18h8" data-v-5b2bb829></path><path d="M6 6l2 2" data-v-5b2bb829></path><path d="M18 6l-2 2" data-v-5b2bb829></path><path d="M6 18l2-2" data-v-5b2bb829></path><path d="M18 18l-2-2" data-v-5b2bb829></path></svg>',1)])],10,Z),c("div",N,[t[32]||(t[32]=c("span",null,"速度",-1)),p(c("input",{type:"range","onUpdate:modelValue":t[8]||(t[8]=e=>X.value=e),min:"1",max:"10",step:"1"},null,512),[[h,X.value]]),c("span",null,b(X.value),1)]),c("div",J,[t[33]||(t[33]=c("span",null,"字体",-1)),p(c("input",{type:"range","onUpdate:modelValue":t[9]||(t[9]=e=>ee.value=e),min:"24",max:"80",step:"2"},null,512),[[h,ee.value]]),c("span",null,b(ee.value)+"px",1)]),c("div",O,[t[34]||(t[34]=c("span",null,"聚焦",-1)),p(c("input",{type:"range","onUpdate:modelValue":t[10]||(t[10]=e=>ne.value=e),min:"1",max:"5",step:"1"},null,512),[[h,ne.value]]),c("span",null,b(ne.value)+"行",1)]),c("button",{onClick:ye,class:"fs-control-btn",title:"退出全屏 (ESC)"},[...t[35]||(t[35]=[c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[c("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})],-1)])])])):i("",!0),re.value?(v(),u("div",{key:2,class:g(["message-toast",de.value])},b(re.value),3)):i("",!0)],2))}}),[["__scopeId","data-v-5b2bb829"]]);export{Y as default};
